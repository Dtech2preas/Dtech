<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Anime Hub</title>
  <style>
    body { background: #111; color: #fff; font-family: Arial; padding: 20px; }
    h2 { color: #f90; }
    .anime-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px; }
    .anime-card { background: #222; padding: 10px; text-align: center; cursor: pointer; border-radius: 8px; }
    .anime-card img { width: 100%; border-radius: 6px; }
    .search-bar { margin-bottom: 20px; }
    input[type="text"] { padding: 10px; width: 100%; font-size: 16px; border-radius: 5px; border: none; }
  </style>
</head>
<body>

  <h1>🍿 Anime Streaming</h1>
  <div class="search-bar">
    <input type="text" id="search" placeholder="🔍 Search anime...">
  </div>

  <h2>🔥 Popular</h2>
  <div class="anime-grid" id="popular"></div>

  <h2>🎬 Action</h2>
  <div class="anime-grid" id="action"></div>

  <h2>🏕 Slice of Life</h2>
  <div class="anime-grid" id="slice_of_life"></div>

  <h2>🚀 Sci-Fi</h2>
  <div class="anime-grid" id="sci-fi"></div>

  <h2>🎭 Drama</h2>
  <div class="anime-grid" id="drama"></div>

  <h2>🤣 Comedy</h2>
  <div class="anime-grid" id="comedy"></div>

  <h2>🧝‍♂️ Fantasy</h2>
  <div class="anime-grid" id="fantasy"></div>

  <script>
    const sections = ["popular", "action", "slice_of_life", "sci-fi", "drama", "comedy", "fantasy"];
    let allAnime = [];

    sections.forEach(section => {
      fetch(`${section}.json`)
        .then(res => res.json())
        .then(data => {
          allAnime = allAnime.concat(data);
          renderSection(section, data);
        });
    });

    function renderSection(id, data) {
      const container = document.getElementById(id);
      data.forEach(anime => {
        const card = document.createElement("div");
        card.className = "anime-card";
        card.innerHTML = `
          <img src="${anime.metadata.image}" alt="${anime.metadata.title}">
          <p>${anime.metadata.title}</p>
        `;
        card.onclick = () => {
          const titleParam = encodeURIComponent(anime.anime_name);
          window.location.href = `anime.html?title=${titleParam}`;
        };
        container.appendChild(card);
      });
    }

    document.getElementById("search").addEventListener("input", e => {
      const value = e.target.value.toLowerCase();
      document.querySelectorAll(".anime-card").forEach(card => {
        card.style.display = card.textContent.toLowerCase().includes(value) ? "" : "none";
      });
    });
  </script>
</body>
</html>