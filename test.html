<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AnimeFlix - Stream Anime Online</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #f47521;
            --secondary: #23252b;
            --dark: #0e0f13;
            --light: #f8f9fa;
            --gray: #6c757d;
            --card-bg: #1a1c23;
            --hover: #ff8c42;
        }

        body {
            background-color: var(--dark);
            color: var(--light);
            overflow-x: hidden;
        }

        /* Header Styles */
        header {
            background: linear-gradient(to bottom, rgba(14, 15, 19, 0.9), rgba(14, 15, 19, 0.7));
            backdrop-filter: blur(10px);
            padding: 15px 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 28px;
            font-weight: 700;
            color: var(--primary);
        }

        .logo i {
            color: var(--primary);
        }

        .logo span {
            background: linear-gradient(45deg, #f47521, #ff5252);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 25px;
        }

        nav a {
            color: var(--light);
            text-decoration: none;
            font-weight: 500;
            font-size: 16px;
            transition: color 0.3s;
            padding: 8px 12px;
            border-radius: 4px;
        }

        nav a:hover, nav a.active {
            color: var(--primary);
            background: rgba(244, 117, 33, 0.1);
        }

        .search-container {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 30px;
            padding: 8px 15px;
            width: 300px;
            transition: all 0.3s;
        }

        .search-container:focus-within {
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 0 2px var(--primary);
        }

        .search-container input {
            background: transparent;
            border: none;
            color: white;
            width: 100%;
            padding: 5px 10px;
            outline: none;
            font-size: 15px;
        }

        .search-container button {
            background: transparent;
            border: none;
            color: var(--gray);
            cursor: pointer;
            transition: color 0.3s;
        }

        .search-container button:hover {
            color: var(--primary);
        }

        .user-actions {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .user-actions button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 4px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.3s;
        }

        .user-actions button:hover {
            background: var(--hover);
        }

        /* Hero Section */
        .hero {
            height: 80vh;
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), 
                        url('https://images.unsplash.com/photo-1533279443086-d1c19a186416?ixlib=rb-4.0.3') no-repeat center center/cover;
            display: flex;
            align-items: center;
            padding: 0 5%;
            position: relative;
        }

        .hero-content {
            max-width: 600px;
            z-index: 2;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #ff7e5f, #feb47b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            color: #ddd;
            line-height: 1.6;
        }

        .hero-buttons {
            display: flex;
            gap: 15px;
        }

        .btn {
            padding: 12px 30px;
            border-radius: 30px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--hover);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(244, 117, 33, 0.3);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.15);
            color: white;
            backdrop-filter: blur(10px);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
        }

        /* Category Sections */
        .category-section {
            padding: 50px 5%;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .section-title {
            font-size: 28px;
            position: relative;
            padding-left: 15px;
        }

        .section-title::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            height: 80%;
            width: 5px;
            background: var(--primary);
            border-radius: 10px;
        }

        .view-all {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .view-all:hover {
            text-decoration: underline;
        }

        .anime-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 25px;
        }

        .anime-card {
            background: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
            position: relative;
        }

        .anime-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .anime-card img {
            width: 100%;
            height: 300px;
            object-fit: cover;
            display: block;
        }

        .anime-info {
            padding: 15px;
        }

        .anime-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .anime-meta {
            display: flex;
            justify-content: space-between;
            color: var(--gray);
            font-size: 14px;
        }

        .rating {
            color: gold;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* Anime Detail Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: var(--secondary);
            width: 90%;
            max-width: 1000px;
            max-height: 90vh;
            border-radius: 10px;
            overflow: hidden;
            overflow-y: auto;
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            color: white;
            font-size: 20px;
            cursor: pointer;
            z-index: 10;
            transition: background 0.3s;
        }

        .close-modal:hover {
            background: var(--primary);
        }

        .anime-detail {
            display: flex;
            flex-direction: column;
        }

        .detail-header {
            display: flex;
            gap: 30px;
            padding: 30px;
            background: rgba(0, 0, 0, 0.4);
        }

        .detail-poster {
            flex: 0 0 300px;
        }

        .detail-poster img {
            width: 100%;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .detail-info {
            flex: 1;
        }

        .detail-title {
            font-size: 36px;
            margin-bottom: 10px;
        }

        .detail-japanese {
            color: var(--gray);
            margin-bottom: 20px;
            font-style: italic;
        }

        .detail-meta {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
        }

        .detail-score {
            background: rgba(255, 215, 0, 0.1);
            padding: 5px 15px;
            border-radius: 30px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .detail-episodes {
            background: rgba(33, 150, 243, 0.1);
            padding: 5px 15px;
            border-radius: 30px;
        }

        .detail-synopsis {
            line-height: 1.7;
            color: #ddd;
            margin-bottom: 25px;
        }

        .detail-actions {
            display: flex;
            gap: 15px;
        }

        .episodes-section {
            padding: 30px;
            background: var(--card-bg);
        }

        .episodes-title {
            font-size: 24px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }

        .episodes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 15px;
        }

        .episode-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .episode-card:hover {
            background: var(--primary);
            transform: translateY(-3px);
        }

        .episode-card:hover .episode-title {
            color: white;
        }

        .episode-number {
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--primary);
        }

        .episode-card:hover .episode-number {
            color: white;
        }

        .episode-title {
            font-size: 14px;
            color: #ddd;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Player Modal */
        .player-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }

        .player-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .player-header {
            width: 90%;
            max-width: 1000px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
        }

        .player-title {
            font-size: 24px;
            font-weight: 600;
        }

        .close-player {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            color: white;
            font-size: 20px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .close-player:hover {
            background: var(--primary);
        }

        .player-container {
            width: 90%;
            max-width: 1000px;
            height: 70vh;
            background: black;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .loading-animation {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .spinner {
            width: 70px;
            height: 70px;
            border: 5px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top: 5px solid var(--primary);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 20px;
            font-weight: 500;
        }

        .player-iframe {
            width: 100%;
            height: 100%;
            border: none;
            display: none;
        }

        /* Search Results */
        .search-results {
            padding: 50px 5%;
            display: none;
        }

        .search-results.active {
            display: block;
        }

        /* Footer */
        footer {
            background: var(--secondary);
            padding: 50px 5% 30px;
            margin-top: 50px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-column h3 {
            font-size: 20px;
            margin-bottom: 20px;
            color: var(--primary);
            position: relative;
            padding-bottom: 10px;
        }

        .footer-column h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 3px;
            background: var(--primary);
        }

        .footer-column ul {
            list-style: none;
        }

        .footer-column ul li {
            margin-bottom: 12px;
        }

        .footer-column ul li a {
            color: var(--gray);
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-column ul li a:hover {
            color: var(--primary);
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            transition: all 0.3s;
        }

        .social-links a:hover {
            background: var(--primary);
            transform: translateY(-5px);
        }

        .copyright {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--gray);
            font-size: 14px;
        }

        /* Responsive Design */
        @media (max-width: 992px) {
            .detail-header {
                flex-direction: column;
            }
            
            .detail-poster {
                margin: 0 auto;
            }
        }

        @media (max-width: 768px) {
            header {
                flex-wrap: wrap;
                gap: 15px;
            }
            
            .search-container {
                order: 3;
                width: 100%;
            }
            
            .hero h1 {
                font-size: 2.5rem;
            }
            
            nav ul {
                gap: 10px;
            }
        }

        @media (max-width: 576px) {
            .hero-buttons {
                flex-direction: column;
            }
            
            .anime-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .episodes-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="logo">
            <i class="fas fa-play-circle"></i>
            <span>AnimeFlix</span>
        </div>
        <nav>
            <ul>
                <li><a href="#" class="active">Home</a></li>
                <li><a href="#">Popular</a></li>
                <li><a href="#">Browse</a></li>
                <li><a href="#">Schedule</a></li>
                <li><a href="#">News</a></li>
            </ul>
        </nav>
        <div class="search-container">
            <input type="text" id="search-input" placeholder="Search anime...">
            <button id="search-button"><i class="fas fa-search"></i></button>
        </div>
        <div class="user-actions">
            <button id="login-btn">Log In</button>
            <button id="signup-btn">Sign Up</button>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h1>Unlimited Anime Streaming</h1>
            <p>Watch thousands of anime episodes ad-free with premium quality. New episodes added daily. Join millions of anime fans worldwide.</p>
            <div class="hero-buttons">
                <button class="btn btn-primary">Start Free Trial</button>
                <button class="btn btn-secondary">Learn More</button>
            </div>
        </div>
    </section>

    <!-- Search Results -->
    <section class="search-results" id="search-results">
        <div class="section-header">
            <h2 class="section-title">Search Results</h2>
        </div>
        <div class="anime-grid" id="search-results-grid">
            <!-- Search results will be loaded here -->
        </div>
    </section>

    <!-- Popular Anime Section -->
    <section class="category-section">
        <div class="section-header">
            <h2 class="section-title">Popular Anime</h2>
            <a href="#" class="view-all">View All <i class="fas fa-chevron-right"></i></a>
        </div>
        <div class="anime-grid" id="popular-anime">
            <!-- Popular anime will be loaded here -->
        </div>
    </section>

    <!-- All Anime Section -->
    <section class="category-section">
        <div class="section-header">
            <h2 class="section-title">All Anime</h2>
            <a href="#" class="view-all">View All <i class="fas fa-chevron-right"></i></a>
        </div>
        <div class="anime-grid" id="all-anime">
            <!-- All anime will be loaded here -->
        </div>
    </section>

    <!-- Category Sections -->
    <section class="category-section">
        <div class="section-header">
            <h2 class="section-title">Action Anime</h2>
            <a href="#" class="view-all">View All <i class="fas fa-chevron-right"></i></a>
        </div>
        <div class="anime-grid" id="action-anime">
            <!-- Action anime will be loaded here -->
        </div>
    </section>

    <section class="category-section">
        <div class="section-header">
            <h2 class="section-title">Slice of Life</h2>
            <a href="#" class="view-all">View All <i class="fas fa-chevron-right"></i></a>
        </div>
        <div class="anime-grid" id="slice-of-life-anime">
            <!-- Slice of Life anime will be loaded here -->
        </div>
    </section>

    <section class="category-section">
        <div class="section-header">
            <h2 class="section-title">Adventure</h2>
            <a href="#" class="view-all">View All <i class="fas fa-chevron-right"></i></a>
        </div>
        <div class="anime-grid" id="adventure-anime">
            <!-- Adventure anime will be loaded here -->
        </div>
    </section>

    <section class="category-section">
        <div class="section-header">
            <h2 class="section-title">Sci-Fi</h2>
            <a href="#" class="view-all">View All <i class="fas fa-chevron-right"></i></a>
        </div>
        <div class="anime-grid" id="sci-fi-anime">
            <!-- Sci-Fi anime will be loaded here -->
        </div>
    </section>

    <section class="category-section">
        <div class="section-header">
            <h2 class="section-title">Drama</h2>
            <a href="#" class="view-all">View All <i class="fas fa-chevron-right"></i></a>
        </div>
        <div class="anime-grid" id="drama-anime">
            <!-- Drama anime will be loaded here -->
        </div>
    </section>

    <section class="category-section">
        <div class="section-header">
            <h2 class="section-title">Comedy</h2>
            <a href="#" class="view-all">View All <i class="fas fa-chevron-right"></i></a>
        </div>
        <div class="anime-grid" id="comedy-anime">
            <!-- Comedy anime will be loaded here -->
        </div>
    </section>

    <section class="category-section">
        <div class="section-header">
            <h2 class="section-title">Fantasy</h2>
            <a href="#" class="view-all">View All <i class="fas fa-chevron-right"></i></a>
        </div>
        <div class="anime-grid" id="fantasy-anime">
            <!-- Fantasy anime will be loaded here -->
        </div>
    </section>

    <!-- Anime Detail Modal -->
    <div class="modal" id="anime-modal">
        <div class="modal-content">
            <button class="close-modal" id="close-anime-modal"><i class="fas fa-times"></i></button>
            <div class="anime-detail" id="anime-detail-content">
                <!-- Anime details will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Player Modal -->
    <div class="player-modal" id="player-modal">
        <div class="player-header">
            <h3 class="player-title" id="player-title">Loading Episode...</h3>
            <button class="close-player" id="close-player"><i class="fas fa-times"></i></button>
        </div>
        <div class="player-container">
            <div class="loading-animation" id="loading-animation">
                <div class="spinner"></div>
                <div class="loading-text">Loading episode, please wait...</div>
            </div>
            <iframe class="player-iframe" id="player-iframe" allowfullscreen></iframe>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-column">
                <h3>AnimeFlix</h3>
                <p>Your premier destination for streaming anime. Watch thousands of episodes across all genres, anytime, anywhere.</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-discord"></i></a>
                </div>
            </div>
            <div class="footer-column">
                <h3>Navigation</h3>
                <ul>
                    <li><a href="#">Home</a></li>
                    <li><a href="#">Popular Anime</a></li>
                    <li><a href="#">New Releases</a></li>
                    <li><a href="#">Browse Categories</a></li>
                    <li><a href="#">Schedule</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>Legal</h3>
                <ul>
                    <li><a href="#">Terms of Service</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Cookie Policy</a></li>
                    <li><a href="#">Copyright</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>Support</h3>
                <ul>
                    <li><a href="#">Help Center</a></li>
                    <li><a href="#">FAQ</a></li>
                    <li><a href="#">Contact Us</a></li>
                    <li><a href="#">Feedback</a></li>
                </ul>
            </div>
        </div>
        <div class="copyright">
            &copy; 2023 AnimeFlix. All rights reserved. This site is for demonstration purposes only.
        </div>
    </footer>

    <script>
        // DOM Elements
        const popularAnimeGrid = document.getElementById('popular-anime');
        const allAnimeGrid = document.getElementById('all-anime');
        const actionAnimeGrid = document.getElementById('action-anime');
        const sliceOfLifeAnimeGrid = document.getElementById('slice-of-life-anime');
        const adventureAnimeGrid = document.getElementById('adventure-anime');
        const sciFiAnimeGrid = document.getElementById('sci-fi-anime');
        const dramaAnimeGrid = document.getElementById('drama-anime');
        const comedyAnimeGrid = document.getElementById('comedy-anime');
        const fantasyAnimeGrid = document.getElementById('fantasy-anime');
        const searchResultsGrid = document.getElementById('search-results-grid');
        const searchResultsSection = document.getElementById('search-results');
        
        const animeModal = document.getElementById('anime-modal');
        const closeAnimeModal = document.getElementById('close-anime-modal');
        const animeDetailContent = document.getElementById('anime-detail-content');
        
        const playerModal = document.getElementById('player-modal');
        const closePlayer = document.getElementById('close-player');
        const playerIframe = document.getElementById('player-iframe');
        const loadingAnimation = document.getElementById('loading-animation');
        const playerTitle = document.getElementById('player-title');

        // Global anime data storage
        let allAnimeData = {
            popular: [],
            all: [],
            action: [],
            slice_of_life: [],
            adventure: [],
            sci_fi: [],
            drama: [],
            comedy: [],
            fantasy: []
        };

        // Fetch anime data from JSON files
        async function fetchAnimeData() {
            try {
                // Fetch popular anime
                const popularResponse = await fetch('popular.json');
                allAnimeData.popular = await popularResponse.json();
                
                // Fetch all anime
                const allResponse = await fetch('all.json');
                allAnimeData.all = await allResponse.json();
                
                // Fetch action anime
                const actionResponse = await fetch('action.json');
                allAnimeData.action = await actionResponse.json();
                
                // Fetch slice of life anime
                const sliceOfLifeResponse = await fetch('slice_of_life.json');
                allAnimeData.slice_of_life = await sliceOfLifeResponse.json();
                
                // Fetch adventure anime
                const adventureResponse = await fetch('adventure.json');
                allAnimeData.adventure = await adventureResponse.json();
                
                // Fetch sci-fi anime
                const sciFiResponse = await fetch('sci-fi.json');
                allAnimeData.sci_fi = await sciFiResponse.json();
                
                // Fetch drama anime
                const dramaResponse = await fetch('drama.json');
                allAnimeData.drama = await dramaResponse.json();
                
                // Fetch comedy anime
                const comedyResponse = await fetch('comedy.json');
                allAnimeData.comedy = await comedyResponse.json();
                
                // Fetch fantasy anime
                const fantasyResponse = await fetch('fantasy.json');
                allAnimeData.fantasy = await fantasyResponse.json();
                
                // Render all sections
                renderAllSections();
            } catch (error) {
                console.error('Error fetching anime data:', error);
                // Fallback to sample data if fetch fails
                loadSampleData();
                renderAllSections();
            }
        }

        // Sample data for demonstration if JSON files are not available
        function loadSampleData() {
            // Popular anime
            allAnimeData.popular = [
                {
                    anime_name: "mushishi",
                    metadata: {
                        title: "Mushishi",
                        japanese_title: "蟲師",
                        synopsis: "\"Mushi\": the most basic forms of life in the world. They exist without any goals or purposes aside from simply \"being.\" They are beyond the shackles of the words \"good\" and \"evil.\" Mushi can exist in countless forms and are capable of mimicking things from the natural world such as plants, diseases, and even phenomena like rainbows.",
                        score: 8.65,
                        episodes: 26,
                        image: "https://cdn.myanimelist.net/images/anime/2/73862.jpg",
                        url: "https://myanimelist.net/anime/457/Mushishi"
                    },
                    episodes: Array.from({length: 26}, (_, i) => ({
                        title: "Mushishi",
                        episode: `Episode ${26 - i}`,
                        iframe: `<iframe src="https://databasegdriveplayer.xyz/player.php?type=anime&slug=mushishi&episode=${26 - i}" frameborder="0" width="100%" height="400" allowfullscreen></iframe>`
                    }))
                },
                {
                    anime_name: "natsume yuujinchou",
                    metadata: {
                        title: "Natsume Yuujinchou",
                        japanese_title: "夏目友人帳",
                        synopsis: "Due to an unusual ability to see strange creatures called youkai, Takashi Natsume has never fit in. Passed around from one foster home to another, he was left isolated and lonely. Over time, he has accepted that no one would ever believe him and has closed himself off to his current caretakers and classmates.",
                        score: 8.3,
                        episodes: 13,
                        image: "https://cdn.myanimelist.net/images/anime/1681/108439.jpg",
                        url: "https://myanimelist.net/anime/4081/Natsume_Yuujinchou"
                    },
                    episodes: Array.from({length: 13}, (_, i) => ({
                        title: "Natsume Yuujinchou",
                        episode: `Episode ${13 - i}`,
                        iframe: `<iframe src="https://databasegdriveplayer.xyz/player.php?type=anime&slug=natsume-yuujinchou&episode=${13 - i}" frameborder="0" width="100%" height="400" allowfullscreen></iframe>`
                    }))
                }
            ];
            
            // Other categories would have similar data
            // For demo purposes, we'll duplicate the popular data in other categories
            allAnimeData.all = [...allAnimeData.popular];
            allAnimeData.action = [...allAnimeData.popular];
            allAnimeData.slice_of_life = [...allAnimeData.popular];
            allAnimeData.adventure = [...allAnimeData.popular];
            allAnimeData.sci_fi = [...allAnimeData.popular];
            allAnimeData.drama = [...allAnimeData.popular];
            allAnimeData.comedy = [...allAnimeData.popular];
            allAnimeData.fantasy = [...allAnimeData.popular];
        }

        // Render anime cards
        function renderAnimeCard(anime, container) {
            const card = document.createElement('div');
            card.className = 'anime-card';
            card.innerHTML = `
                <img src="${anime.metadata.image}" alt="${anime.metadata.title}">
                <div class="anime-info">
                    <div class="anime-title">${anime.metadata.title}</div>
                    <div class="anime-meta">
                        <div class="rating">
                            <i class="fas fa-star"></i>
                            ${anime.metadata.score}
                        </div>
                        <div>${anime.metadata.episodes} EP</div>
                    </div>
                </div>
            `;
            card.addEventListener('click', () => openAnimeDetail(anime));
            container.appendChild(card);
        }

        // Render all sections
        function renderAllSections() {
            // Clear previous content
            popularAnimeGrid.innerHTML = '';
            allAnimeGrid.innerHTML = '';
            actionAnimeGrid.innerHTML = '';
            sliceOfLifeAnimeGrid.innerHTML = '';
            adventureAnimeGrid.innerHTML = '';
            sciFiAnimeGrid.innerHTML = '';
            dramaAnimeGrid.innerHTML = '';
            comedyAnimeGrid.innerHTML = '';
            fantasyAnimeGrid.innerHTML = '';
            
            // Render popular anime
            allAnimeData.popular.forEach(anime => {
                renderAnimeCard(anime, popularAnimeGrid);
            });
            
            // Render all anime
            allAnimeData.all.forEach(anime => {
                renderAnimeCard(anime, allAnimeGrid);
            });
            
            // Render action anime
            allAnimeData.action.forEach(anime => {
                renderAnimeCard(anime, actionAnimeGrid);
            });
            
            // Render slice of life anime
            allAnimeData.slice_of_life.forEach(anime => {
                renderAnimeCard(anime, sliceOfLifeAnimeGrid);
            });
            
            // Render adventure anime
            allAnimeData.adventure.forEach(anime => {
                renderAnimeCard(anime, adventureAnimeGrid);
            });
            
            // Render sci-fi anime
            allAnimeData.sci_fi.forEach(anime => {
                renderAnimeCard(anime, sciFiAnimeGrid);
            });
            
            // Render drama anime
            allAnimeData.drama.forEach(anime => {
                renderAnimeCard(anime, dramaAnimeGrid);
            });
            
            // Render comedy anime
            allAnimeData.comedy.forEach(anime => {
                renderAnimeCard(anime, comedyAnimeGrid);
            });
            
            // Render fantasy anime
            allAnimeData.fantasy.forEach(anime => {
                renderAnimeCard(anime, fantasyAnimeGrid);
            });
        }

        // Open anime detail modal
        function openAnimeDetail(anime) {
            animeDetailContent.innerHTML = `
                <div class="detail-header">
                    <div class="detail-poster">
                        <img src="${anime.metadata.image}" alt="${anime.metadata.title}">
                    </div>
                    <div class="detail-info">
                        <h2 class="detail-title">${anime.metadata.title}</h2>
                        <div class="detail-japanese">${anime.metadata.japanese_title}</div>
                        <div class="detail-meta">
                            <div class="detail-score">
                                <i class="fas fa-star"></i>
                                ${anime.metadata.score}
                            </div>
                            <div class="detail-episodes">
                                <i class="fas fa-play-circle"></i>
                                ${anime.metadata.episodes} Episodes
                            </div>
                        </div>
                        <p class="detail-synopsis">${anime.metadata.synopsis}</p>
                        <div class="detail-actions">
                            <button class="btn btn-primary">Add to Watchlist</button>
                            <button class="btn btn-secondary">Share</button>
                        </div>
                    </div>
                </div>
                <div class="episodes-section">
                    <h3 class="episodes-title">Episodes</h3>
                    <div class="episodes-grid" id="episodes-grid">
                        <!-- Episodes will be loaded here -->
                    </div>
                </div>
            `;
            
            // Render episodes
            const episodesGrid = document.getElementById('episodes-grid');
            anime.episodes.forEach(ep => {
                const episode = document.createElement('div');
                episode.className = 'episode-card';
                episode.innerHTML = `
                    <div class="episode-number">${ep.episode}</div>
                    <div class="episode-title">${ep.title}</div>
                `;
                episode.addEventListener('click', () => playEpisode(anime, ep));
                episodesGrid.appendChild(episode);
            });
            
            animeModal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // Play episode
        function playEpisode(anime, episode) {
            playerTitle.textContent = `${anime.metadata.title} - ${episode.episode}`;
            playerModal.classList.add('active');
            loadingAnimation.style.display = 'flex';
            playerIframe.style.display = 'none';
            document.body.style.overflow = 'hidden';
            
            // Extract src from iframe HTML string
            const parser = new DOMParser();
            const doc = parser.parseFromString(episode.iframe, 'text/html');
            const iframe = doc.querySelector('iframe');
            const src = iframe ? iframe.getAttribute('src') : '';
            
            // Simulate loading the iframe after 5 seconds
            setTimeout(() => {
                if (src) {
                    playerIframe.src = src;
                    playerIframe.style.display = 'block';
                    loadingAnimation.style.display = 'none';
                } else {
                    // Fallback to showing the iframe HTML directly
                    playerIframe.srcdoc = episode.iframe;
                    playerIframe.style.display = 'block';
                    loadingAnimation.style.display = 'none';
                }
            }, 5000);
        }

        // Close modals
        closeAnimeModal.addEventListener('click', () => {
            animeModal.classList.remove('active');
            document.body.style.overflow = 'auto';
        });

        closePlayer.addEventListener('click', () => {
            playerModal.classList.remove('active');
            document.body.style.overflow = 'auto';
        });

        // Close modals when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target === animeModal) {
                animeModal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
            if (e.target === playerModal) {
                playerModal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        });

        // Search functionality
        const searchInput = document.getElementById('search-input');
        const searchButton = document.getElementById('search-button');
        
        function searchAnime() {
            const query = searchInput.value.toLowerCase().trim();
            if (query) {
                // Clear previous results
                searchResultsGrid.innerHTML = '';
                
                // Hide all category sections
                document.querySelectorAll('.category-section').forEach(section => {
                    section.style.display = 'none';
                });
                
                // Show search results section
                searchResultsSection.classList.add('active');
                
                // Search through all categories
                let foundResults = false;
                
                // Combine all anime from all categories
                const allAnime = [
                    ...allAnimeData.popular,
                    ...allAnimeData.all,
                    ...allAnimeData.action,
                    ...allAnimeData.slice_of_life,
                    ...allAnimeData.adventure,
                    ...allAnimeData.sci_fi,
                    ...allAnimeData.drama,
                    ...allAnimeData.comedy,
                    ...allAnimeData.fantasy
                ];
                
                // Filter anime based on search query
                allAnime.forEach(anime => {
                    if (anime.metadata.title.toLowerCase().includes(query) || 
                        anime.metadata.japanese_title.toLowerCase().includes(query)) {
                        renderAnimeCard(anime, searchResultsGrid);
                        foundResults = true;
                    }
                });
                
                if (!foundResults) {
                    searchResultsGrid.innerHTML = `
                        <div class="no-results" style="grid-column: 1 / -1; text-align: center; padding: 40px;">
                            <i class="fas fa-search" style="font-size: 48px; color: var(--gray); margin-bottom: 20px;"></i>
                            <h3>No results found for "${query}"</h3>
                            <p>Try searching for a different anime title</p>
                        </div>
                    `;
                }
            } else {
                // If search is empty, show all sections
                searchResultsSection.classList.remove('active');
                document.querySelectorAll('.category-section').forEach(section => {
                    section.style.display = 'block';
                });
            }
        }
        
        searchButton.addEventListener('click', searchAnime);
        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') searchAnime();
        });

        // Initialize the page
        fetchAnimeData();
    </script>
</body>
</html>