<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AnimeFlix - Enhanced Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #0f0f1b;
            color: #fff;
            overflow-x: hidden;
        }
        
        /* Header Styles */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 5%;
            background: linear-gradient(90deg, #1a1a2e, #16213e);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo i {
            color: #e94560;
            font-size: 28px;
        }
        
        .logo h1 {
            font-size: 24px;
            background: linear-gradient(45deg, #e94560, #ff7a8a);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: 700;
        }
        
        .search-container {
            display: flex;
            width: 50%;
            max-width: 500px;
        }
        
        .search-container input {
            width: 100%;
            padding: 12px 20px;
            border: none;
            border-radius: 30px 0 0 30px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            font-size: 16px;
            outline: none;
            transition: all 0.3s;
        }
        
        .search-container input:focus {
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 10px rgba(233, 69, 96, 0.5);
        }
        
        .search-container button {
            padding: 12px 20px;
            border: none;
            border-radius: 0 30px 30px 0;
            background: #e94560;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .search-container button:hover {
            background: #ff5c77;
        }
        
        .user-actions {
            display: flex;
            gap: 15px;
        }
        
        .user-actions button {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .user-actions button:hover {
            background: rgba(233, 69, 96, 0.3);
        }
        
        /* Main Content Styles */
        .container {
            padding: 20px 5%;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .section-title {
            font-size: 24px;
            color: #fff;
            position: relative;
            padding-left: 15px;
        }
        
        .section-title::before {
            content: '';
            position: absolute;
            left: 0;
            top: 5px;
            height: 20px;
            width: 5px;
            background: #e94560;
            border-radius: 5px;
        }
        
        .anime-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .anime-card {
            background: #1a1a2e;
            border-radius: 10px;
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
            position: relative;
        }
        
        .anime-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
        }
        
        .anime-card img {
            width: 100%;
            height: 280px;
            object-fit: cover;
            display: block;
        }
        
        .anime-info {
            padding: 15px;
        }
        
        .anime-info h3 {
            font-size: 16px;
            margin-bottom: 5px;
            color: #fff;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .anime-info p {
            font-size: 14px;
            color: #aaa;
            display: flex;
            justify-content: space-between;
        }
        
        .episode-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #e94560;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .rating {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: #ffd700;
            padding: 5px 8px;
            border-radius: 5px;
            font-size: 12px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 3px;
        }
        
        /* Video Player Modal */
        .video-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }
        
        .video-modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .video-container {
            width: 90%;
            max-width: 1200px;
            position: relative;
        }
        
        .close-btn {
            position: absolute;
            top: -50px;
            right: 0;
            color: white;
            font-size: 36px;
            cursor: pointer;
            background: transparent;
            border: none;
            transition: all 0.3s;
            z-index: 1001;
        }
        
        .close-btn:hover {
            color: #e94560;
        }
        
        .video-player {
            width: 100%;
            height: 0;
            padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
            position: relative;
        }
        
        .video-player iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }
        
        /* Search Results */
        .search-results {
            display: none;
            padding: 20px 0;
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .no-results {
            text-align: center;
            padding: 40px;
            color: #888;
            font-size: 18px;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            header {
                flex-direction: column;
                gap: 15px;
            }
            
            .search-container {
                width: 100%;
            }
            
            .anime-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 15px;
            }
            
            .anime-card img {
                height: 220px;
            }
        }
        
        @media (max-width: 480px) {
            .anime-grid {
                grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
                gap: 10px;
            }
            
            .anime-card img {
                height: 180px;
            }
            
            .section-title {
                font-size: 20px;
            }
        }
        
        @media (orientation: landscape) {
            .video-container {
                width: 100%;
                height: 100vh;
                max-width: none;
            }
            
            .video-player {
                height: 100%;
                padding-bottom: 0;
            }
            
            .close-btn {
                top: 20px;
                right: 20px;
                font-size: 32px;
            }
        }
    </style>
</head>
<body>
    <!-- Header with Search -->
    <header>
        <div class="logo">
            <i class="fas fa-play-circle"></i>
            <h1>AnimeFlix</h1>
        </div>
        
        <div class="search-container">
            <input type="text" id="search-input" placeholder="Search for anime...">
            <button id="search-btn"><i class="fas fa-search"></i></button>
        </div>
        
        <div class="user-actions">
            <button><i class="fas fa-user"></i> Sign In</button>
            <button><i class="fas fa-heart"></i> Favorites</button>
        </div>
    </header>
    
    <!-- Main Content -->
    <div class="container">
        <!-- Search Results Section -->
        <div class="search-results" id="search-results">
            <div class="section-header">
                <h2 class="section-title">Search Results</h2>
            </div>
            <div class="results-grid" id="results-container">
                <!-- Results will be populated here -->
            </div>
        </div>
        
        <!-- Recently Updated Section -->
        <div class="section-header">
            <h2 class="section-title">Recently Updated</h2>
        </div>
        <div class="anime-grid">
            <!-- Anime cards will be populated -->
        </div>
        
        <!-- Popular This Season -->
        <div class="section-header">
            <h2 class="section-title">Popular This Season</h2>
        </div>
        <div class="anime-grid">
            <!-- Anime cards will be populated -->
        </div>
        
        <!-- All-Time Favorites -->
        <div class="section-header">
            <h2 class="section-title">All-Time Favorites</h2>
        </div>
        <div class="anime-grid">
            <!-- Anime cards will be populated -->
        </div>
    </div>
    
    <!-- Video Player Modal -->
    <div class="video-modal" id="video-modal">
        <div class="video-container">
            <button class="close-btn" id="close-btn">
                <i class="fas fa-times"></i>
            </button>
            <div class="video-player">
                <iframe id="anime-video" src="" allowfullscreen></iframe>
            </div>
        </div>
    </div>

    <script>
        // Sample anime data (simulating all.json)
        const allAnime = [
            {
                id: 1,
                title: "Demon Slayer: Kimetsu no Yaiba",
                image: "https://via.placeholder.com/300x425/1a1a2e/ffffff?text=Demon+Slayer",
                episodes: 26,
                rating: 8.7,
                description: "A boy becomes a demon slayer after his family is slaughtered and his sister transformed into a demon.",
                videoUrl: "https://www.youtube.com/embed/VQGCKyvzIM4"
            },
            {
                id: 2,
                title: "Attack on Titan: Final Season",
                image: "https://via.placeholder.com/300x425/1a1a2e/ffffff?text=Attack+on+Titan",
                episodes: 16,
                rating: 9.2,
                description: "The war for Paradis zeroes in on Shiganshina just as Jaegerists have seized control.",
                videoUrl: "https://www.youtube.com/embed/M_U8D6WgtQY"
            },
            {
                id: 3,
                title: "Jujutsu Kaisen",
                image: "https://via.placeholder.com/300x425/1a1a2e/ffffff?text=Jujutsu+Kaisen",
                episodes: 24,
                rating: 8.7,
                description: "A boy swallows a cursed talisman and becomes entangled in the world of sorcerers and curses.",
                videoUrl: "https://www.youtube.com/embed/pkKu9hLT-t8"
            },
            {
                id: 4,
                title: "My Hero Academia Season 6",
                image: "https://via.placeholder.com/300x425/1a1a2e/ffffff?text=My+Hero+Academia",
                episodes: 25,
                rating: 8.5,
                description: "UA Academy's class 1-A faces their greatest challenge yet during the Paranormal Liberation War.",
                videoUrl: "https://www.youtube.com/embed/8n3_d6-4f8c"
            },
            {
                id: 5,
                title: "One Piece: Wano Country Arc",
                image: "https://via.placeholder.com/300x425/1a1a2e/ffffff?text=One+Piece",
                episodes: 150,
                rating: 9.0,
                description: "The Straw Hat Pirates infiltrate Wano Country to take down the tyrannical Kaido.",
                videoUrl: "https://www.youtube.com/embed/S8_YwFLCh4U"
            },
            {
                id: 6,
                title: "Spy x Family",
                image: "https://via.placeholder.com/300x425/1a1a2e/ffffff?text=Spy+x+Family",
                episodes: 25,
                rating: 8.8,
                description: "A spy on an undercover mission forms a fake family that includes a telepathic girl and an assassin wife.",
                videoUrl: "https://www.youtube.com/embed/0eHr6YfLqWw"
            },
            {
                id: 7,
                title: "Chainsaw Man",
                image: "https://via.placeholder.com/300x425/1a1a2e/ffffff?text=Chainsaw+Man",
                episodes: 12,
                rating: 8.9,
                description: "A poor young man becomes a devil hunter after merging with his pet devil-dog Pochita.",
                videoUrl: "https://www.youtube.com/embed/eyonP1AgC0k"
            },
            {
                id: 8,
                title: "Vinland Saga Season 2",
                image: "https://via.placeholder.com/300x425/1a1a2e/ffffff?text=Vinland+Saga",
                episodes: 24,
                rating: 9.1,
                description: "Thorfinn seeks a new purpose in life after the death of his father's killer.",
                videoUrl: "https://www.youtube.com/embed/dQ9mcZqG2AY"
            }
        ];
        
        // DOM Elements
        const searchInput = document.getElementById('search-input');
        const searchBtn = document.getElementById('search-btn');
        const searchResults = document.getElementById('search-results');
        const resultsContainer = document.getElementById('results-container');
        const videoModal = document.getElementById('video-modal');
        const animeVideo = document.getElementById('anime-video');
        const closeBtn = document.getElementById('close-btn');
        const animeGrids = document.querySelectorAll('.anime-grid');
        
        // Populate anime grids
        function populateAnimeGrids() {
            animeGrids.forEach((grid, index) => {
                // Different sets for each section
                const startIndex = index * 4;
                const endIndex = startIndex + 4;
                const sectionAnime = allAnime.slice(startIndex, endIndex);
                
                grid.innerHTML = sectionAnime.map(anime => `
                    <div class="anime-card" data-id="${anime.id}">
                        <div class="episode-badge">${anime.episodes} EP</div>
                        <div class="rating"><i class="fas fa-star"></i> ${anime.rating}</div>
                        <img src="${anime.image}" alt="${anime.title}">
                        <div class="anime-info">
                            <h3>${anime.title}</h3>
                            <p>${anime.description.substring(0, 60)}...</p>
                        </div>
                    </div>
                `).join('');
            });
            
            // Add event listeners to anime cards
            document.querySelectorAll('.anime-card').forEach(card => {
                card.addEventListener('click', function() {
                    const animeId = this.getAttribute('data-id');
                    const anime = allAnime.find(a => a.id == animeId);
                    
                    if (anime) {
                        animeVideo.src = anime.videoUrl;
                        videoModal.classList.add('active');
                        document.body.style.overflow = 'hidden';
                    }
                });
            });
        }
        
        // Search Functionality
        function searchAnime(query) {
            if (!query.trim()) {
                searchResults.style.display = 'none';
                return;
            }
            
            const filteredAnime = allAnime.filter(anime => 
                anime.title.toLowerCase().includes(query.toLowerCase()) ||
                anime.description.toLowerCase().includes(query.toLowerCase())
            );
            
            if (filteredAnime.length > 0) {
                resultsContainer.innerHTML = filteredAnime.map(anime => `
                    <div class="anime-card" data-id="${anime.id}">
                        <div class="episode-badge">${anime.episodes} EP</div>
                        <div class="rating"><i class="fas fa-star"></i> ${anime.rating}</div>
                        <img src="${anime.image}" alt="${anime.title}">
                        <div class="anime-info">
                            <h3>${anime.title}</h3>
                            <p>${anime.description.substring(0, 60)}...</p>
                        </div>
                    </div>
                `).join('');
                
                // Reattach event listeners to search results
                document.querySelectorAll('.search-results .anime-card').forEach(card => {
                    card.addEventListener('click', function() {
                        const animeId = this.getAttribute('data-id');
                        const anime = allAnime.find(a => a.id == animeId);
                        
                        if (anime) {
                            animeVideo.src = anime.videoUrl;
                            videoModal.classList.add('active');
                            document.body.style.overflow = 'hidden';
                        }
                    });
                });
                
                searchResults.style.display = 'block';
            } else {
                resultsContainer.innerHTML = `
                    <div class="no-results">
                        <i class="fas fa-search" style="font-size: 48px; margin-bottom: 20px;"></i>
                        <h3>No results found for "${query}"</h3>
                        <p>Try different search terms</p>
                    </div>
                `;
                searchResults.style.display = 'block';
            }
        }
        
        // Event Listeners
        searchBtn.addEventListener('click', () => {
            searchAnime(searchInput.value);
        });
        
        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                searchAnime(searchInput.value);
            }
        });
        
        closeBtn.addEventListener('click', () => {
            videoModal.classList.remove('active');
            animeVideo.src = '';
            document.body.style.overflow = 'auto';
        });
        
        // Close modal when clicking outside
        videoModal.addEventListener('click', (e) => {
            if (e.target === videoModal) {
                videoModal.classList.remove('active');
                animeVideo.src = '';
                document.body.style.overflow = 'auto';
            }
        });
        
        // Initialize
        populateAnimeGrids();
    </script>
</body>
</html>